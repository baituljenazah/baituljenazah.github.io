<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pengurusan Jenazah Islam</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;line-height:1.6;color:#333}
header{background:#008000;color:#fff;padding:1rem 0;position:sticky;top:0;z-index:100}
.container{max-width:1200px;margin:auto;padding:0 20px}
nav{display:flex;justify-content:space-between;align-items:center}
.logo{font-size:1.5rem;font-weight:bold}
.nav-links{display:flex;gap:2rem;list-style:none}
.nav-links a{color:#fff;text-decoration:none}
.hero{background:linear-gradient(135deg,#008000,#006400);color:#fff;padding:4rem 0;text-align:center}
.btn{padding:12px 30px;border:none;border-radius:5px;cursor:pointer;font-weight:bold}
.btn-primary{background:#008000;color:#fff}
section{padding:4rem 0}
.services-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:2rem}
.service-card{background:#fff;padding:2rem;border-radius:10px;box-shadow:0 3px 10px rgba(0,0,0,.1);border-top:4px solid #008000}
.price{font-size:1.6rem;font-weight:bold;color:#008000}
.payment-section{background:#f5f5f5}
.payment-form{background:#fff;padding:2rem;border-radius:10px;max-width:700px;margin:auto}
.summary{background:#f9f9f9;padding:1rem;border-left:4px solid #008000;margin-bottom:1rem}
.summary-item{display:flex;justify-content:space-between}
footer{background:#008000;color:#fff;text-align:center;padding:2rem}
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);justify-content:center;align-items:center}
.modal.active{display:flex}
.modal-content{background:#fff;padding:2rem;border-radius:10px;text-align:center}
</style>
</head>

<body>

<header>
<nav class="container">
<div class="logo">☪ Pengurusan Jenazah Islam</div>
<ul class="nav-links">
<li><a href="#services">Perkhidmatan</a></li>
<li><a href="#payment">Pembayaran</a></li>
</ul>
</nav>
</header>

<section class="hero">
<div class="container">
<h1>Perkhidmatan Pengurusan Jenazah Islam</h1>
<p>Mengikut syariat & penuh ihsan</p>
</div>
</section>

<section id="services">
<div class="container">
<div class="services-grid">
<div class="service-card">
<h3>Set Kafankan Asas</h3>
<div class="price">RM 180</div>
<button class="btn btn-primary" onclick="selectPackage('Set Kafankan Asas',180)">Pilih</button>
</div>

<div class="service-card">
<h3>Pakej Pengurusan Lengkap</h3>
<div class="price">RM 1500</div>
<button class="btn btn-primary" onclick="selectPackage('Pakej Pengurusan Lengkap',1500)">Pilih</button>
</div>
</div>
</div>
</section>

<section id="payment" class="payment-section">
<div class="container">
<div class="payment-form">

<div class="summary">
<h3>Ringkasan</h3>
<div id="selected-items">Tiada pakej</div>
<div class="summary-item"><strong>Jumlah:</strong><span id="total">RM 0</span></div>
</div>

<form onsubmit="processPayment(event)">
<input required placeholder="Nama Penuh"><br><br>
<input required placeholder="No Telefon"><br><br>
<input required type="email" placeholder="Email"><br><br>
<textarea required placeholder="Alamat"></textarea><br><br>
<button class="btn btn-primary" type="submit" style="width:100%">Bayar Sekarang</button>
</form>

</div>
</div>
</section>

<footer>
<p>&copy; 2024 Pengurusan Jenazah Islam</p>
</footer>

<div class="modal" id="success">
<div class="modal-content">
<h2>✓ Pembayaran Berjaya</h2>
<p>No Rujukan: <strong id="ref"></strong></p>
<button class="btn btn-primary" onclick="closeModal()">Tutup</button>
</div>
</div>

<!-- ===== SCRIPT ===== -->
<script>
let selectedPackages=[];

function selectPackage(name,price){
selectedPackages.push({name,price});
document.getElementById('selected-items').innerHTML=
selectedPackages.map(p=>p.name+" - RM "+p.price).join("<br>");
document.getElementById('total').textContent=
"RM "+selectedPackages.reduce((s,p)=>s+p.price,0);
}

function closeModal(){
document.getElementById('success').classList.remove('active');
}
</script>

<!-- ===== FIREBASE  ===== -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "API_KEY_KAU",
  authDomain: "PROJECT_ID.firebaseapp.com",
  projectId: "PROJECT_ID",
  storageBucket: "PROJECT_ID.appspot.com",
  messagingSenderId: "XXXX",
  appId: "APP_ID"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.processPayment = async function(e){
e.preventDefault();

const ref="JNZ"+Date.now();
await addDoc(collection(db,"pembayaran"),{
pakej:selectedPackages,
jumlah:selectedPackages.reduce((s,p)=>s+p.price,0),
rujukan:ref,
tarikh:new Date()
});

document.getElementById("ref").textContent=ref;
document.getElementById("success").classList.add("active");
}
</script>

</body>
</html>
